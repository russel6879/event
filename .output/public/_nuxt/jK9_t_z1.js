import{_ as E}from"./4vhGkfJh.js";import{a as h,x as $,B as u,C as m,N as e,k as b,D as _,P as l,F as v,$ as L,Z as i,a2 as r,a4 as y,O as d}from"./zhf3nTjy.js";import{b as S,u as n}from"./BghaiIeg.js";import{a as g}from"./Bzf_yli5.js";import{e as w}from"./C2xPMm21.js";import"./B4uVmeYG.js";const D=y('<section class="breadcrumb-area bread-bg py-5"><div class="overlay"></div><div class="container"><div class="breadcrumb-content text-center"><h2 class="sec__title text-white mb-3">Dashboard</h2><h2 class="sec__title text-white mb-3">Dashboard</h2><ul class="bread-list"><li><a href="index.html">home</a></li><li>pages</li><li>Dashboard</li></ul></div></div></section>',1),V={class:"dashboard-area padding-bottom-70px"},T={class:"bg-white shadow-sm py-4"},A={class:"container"},B={class:"dashboard-nav d-flex flex-wrap align-items-center justify-content-between"},M=e("ul",{class:"nav nav-tabs my-tabs my-tabs-2 justify-content-center my-1",id:"myTab",role:"tablist"},[e("li",{class:"nav-item",role:"presentation"},[e("a",{class:"nav-link active",id:"listings-tab","data-bs-toggle":"tab",href:"#listings",role:"tab","aria-controls":"listings","aria-selected":"true"},[e("i",{class:"fal fa-list me-1 font-size-14"}),l(" Listings ")])]),e("li",{class:"nav-item",role:"presentation"},[e("a",{class:"nav-link",id:"settings-tab","data-bs-toggle":"tab",href:"#settings",role:"tab","aria-controls":"settings","aria-selected":"false"},[e("i",{class:"fal fa-cog me-1 font-size-14"}),l(" Settings ")])])],-1),z={class:"my-1"},F=e("i",{class:"fal fa-plus me-1"},null,-1),R=e("i",{class:"fal fa-sign-out me-1"},null,-1),Y={class:"container"},H={class:"tab-content mt-4",id:"myTabContent"},j={class:"tab-pane fade show active",id:"listings",role:"tabpanel","aria-labelledby":"listings-tab"},O={class:"row"},W={class:"card hover-y"},I={class:"card-image"},Z=["src"],q=e("span",{class:"badge text-bg-success badge-pill"},"Now open",-1),G={class:"card-body position-relative"},J={href:"#",class:"card-cat mb-2"},K=e("span",{class:"fal fa-utensils icon-element icon-element-sm"},null,-1),Q={class:"card-title mb-1"},X={href:"listing-details.html"},ee={class:"card-text"},se=e("div",{class:"star-rating mt-1","data-rating":"5"},[e("div",{class:"rating-counter"},"5 reviews")],-1),te={class:"card-footer bg-transparent border-top-gray"},oe=["onClick"],ae={class:"tab-pane fade",id:"settings",role:"tabpanel","aria-labelledby":"settings-tab"},le={class:"row"},ie=e("div",{class:"col-lg-12"},[e("h4",{class:"font-size-20 font-weight-semi-bold mb-3"}," Edit Profile ")],-1),re={class:"edit-profile-photo media mb-4 col-lg-12"},ne=["src"],ce={class:"file-upload-wrap file-upload-wrap-layout-2 media-body align-self-center"},de=e("span",{class:"file-upload-text"},[e("i",{class:"fal fa-upload me-2"}),l("Upload Photo")],-1),ue={class:"col-lg-6 col-md-6"},me=e("label",{class:"label-text"},"Your Name",-1),ge={class:"form-group"},pe=e("span",{class:"fal fa-user form-icon"},null,-1),fe={class:"col-lg-6 col-md-6"},he=e("label",{class:"label-text"},"Your Email",-1),be={class:"form-group"},_e=e("span",{class:"fal fa-envelope form-icon"},null,-1),ve={class:"col-lg-6 col-md-6"},we=e("label",{class:"label-text"},"Phone Number",-1),ye={class:"form-group"},xe=e("span",{class:"fal fa-phone form-icon"},null,-1),Ce={class:"col-lg-6 col-md-6"},ke=e("label",{class:"label-text"},"Address",-1),Pe={class:"form-group"},Ne=e("span",{class:"fal fa-map-marker-alt form-icon"},null,-1),Ue={class:"col-lg-12"},Ee=e("label",{class:"label-text"},"Notes",-1),$e={class:"form-group"},Le={class:"col-lg-12 col-md-6"},Se=e("label",{class:"label-text"},"Website",-1),De={class:"form-group"},Ve=e("span",{class:"fal fa-globe form-icon"},null,-1),Te=y('<hr class="border-top-gray my-5"><div class="row d-none"><div class="col-lg-12"><h4 class="font-size-20 font-weight-semi-bold mb-3"> Change Password </h4></div><div class="col-lg-6 col-md-6"><label class="label-text">Current Password</label><div class="form-group"><span class="fal fa-lock form-icon"></span><input class="form-control form--control password-field" type="password" name="password" placeholder="Current password"></div></div><div class="col-lg-6 col-md-6"><label class="label-text">New Password</label><div class="form-group"><span class="fal fa-lock form-icon"></span><input class="form-control form--control password-field" type="password" name="password" placeholder="New password"></div></div><div class="col-lg-6 col-md-6"><label class="label-text">New Password (again)</label><div class="form-group"><span class="fal fa-lock form-icon"></span><input class="form-control form--control password-field" type="password" name="password" placeholder="New password again"></div></div><div class="col-lg-12"><a href="javascript:void(0)" class="btn btn-light toggle-password" data-bs-toggle="tooltip" data-placement="right" title="toggle show/hide password"><i class="far fa-eye eye-on"></i><i class="far fa-eye-slash eye-off"></i></a></div><div class="col-lg-12"><button class="theme-btn mt-3 border-0" type="button"> Change Password </button></div></div><div class="border border-danger p-4 mt-5 rounded d-none"><h4 class="font-size-20 font-weight-semi-bold mb-1 text-danger"> Delete Account </h4><p class="mb-3"><span class="text-warning">Warning:</span> Once you delete your account, there is no going back. Please be certain. </p><a href="#" class="theme-btn bg-danger" data-bs-toggle="modal" data-bs-target="#deleteAccountModal">Delete Account</a></div>',3),je={__name:"user-dashboard",setup(Ae){const p=h([]),x=S(),a=h({name:"",email:"",phone:"",address:"",description:"",profile_image:"",profile_image_url:"",website:"",facebook:"",twitter:"",instagram:""}),C=t=>{const o=t.target.files[0];if(o){a.value.profile_image=o;const c=new FileReader;c.onload=s=>{a.value.profile_image_url=s.target.result},c.readAsDataURL(o)}},k=async()=>{try{const t=await g.updateUserProfile(a.value);n().$toast.success("Profile updated successfully!",{autoClose:5e3,theme:"colored",dangerouslyHTMLString:!0})}catch(t){console.error("Error updating profile:",t)}},f=async()=>{try{const t=await w.getUserListings();p.value=t}catch(t){console.error("Error fetching events:",t)}},P=async()=>{try{const t=await g.getUserProfile();a.value=t}catch(t){console.error("Error fetching profile:",t)}};$(()=>{f(),P()});const N=async()=>{try{await g.logout(),localStorage.removeItem("access_token"),x.push("/login"),n().$toast.success("Successfully logged out.",{autoClose:5e3,theme:"colored",dangerouslyHTMLString:!0})}catch(t){console.error("Error logging out:",t),n().$toast.error("Failed to logout. Please try again.",{autoClose:5e3,theme:"colored",dangerouslyHTMLString:!0})}},U=async t=>{try{(await n().$swal.fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"})).isConfirmed&&(await w.deleteEvent(t),n().$toast.success("Your event has been deleted.",{autoClose:5e3,theme:"colored",dangerouslyHTMLString:!0}),f())}catch(o){n().$swal.fire("Error!","Failed to delete event.","error"),console.error("Error deleting event:",o)}};return(t,o)=>{const c=E;return u(),m(v,null,[D,e("section",V,[e("div",T,[e("div",A,[e("div",B,[M,e("div",z,[b(c,{to:"/6add-listing",class:"theme-btn theme-btn-sm bg-white shadow-sm border border-gray text-black font-weight-medium me-1"},{default:_(()=>[F,l(" Add listing")]),_:1}),e("button",{onClick:N,class:"theme-btn theme-btn-sm bg-white shadow-sm border border-gray text-black font-weight-medium"},[R,l(" Log out")])])])])]),e("div",Y,[e("div",H,[e("div",j,[e("div",O,[(u(!0),m(v,null,L(p.value,s=>(u(),m("div",{class:"col-lg-4 col-md-6",key:s.id},[e("div",W,[e("a",I,[e("img",{src:`${t.$config.public.baseURL}/`+s.featured_photo,class:"card-img-top lazy",alt:"card image"},null,8,Z),q]),e("div",G,[e("a",J,[K,l(" "+d(s.category),1)]),e("h4",Q,[e("a",X,d(s.title),1)]),e("p",ee,d(s.venue)+" "+d(s.country),1),se]),e("div",te,[b(c,{to:`/edit-listing/${s.id}`,class:"btn btn-sm edit-btn bg-success text-white me-1"},{default:_(()=>[l(" Edit ")]),_:2},1032,["to"]),e("a",{onClick:Be=>U(s.id),class:"btn btn-sm delete-btn bg-danger text-white"}," Delete ",8,oe)])])]))),128))])]),e("div",ae,[e("div",le,[ie,e("div",re,[e("img",{src:a.value.profile_image_url||`${t.$config.public.baseURL}/`+a.value.profile_image,alt:"avatar image",class:"profile-img me-4 flex-shrink-0"},null,8,ne),e("div",ce,[e("input",{type:"file",onChange:C,class:"multi file-upload-input with-preview",multiple:""},null,32),de])]),e("div",ue,[me,e("div",ge,[pe,i(e("input",{class:"form-control form--control",type:"text","onUpdate:modelValue":o[0]||(o[0]=s=>a.value.name=s)},null,512),[[r,a.value.name]])])]),e("div",fe,[he,e("div",be,[_e,i(e("input",{class:"form-control form--control",type:"text","onUpdate:modelValue":o[1]||(o[1]=s=>a.value.email=s)},null,512),[[r,a.value.email]])])]),e("div",ve,[we,e("div",ye,[xe,i(e("input",{class:"form-control form--control",type:"text","onUpdate:modelValue":o[2]||(o[2]=s=>a.value.phone=s)},null,512),[[r,a.value.phone]])])]),e("div",Ce,[ke,e("div",Pe,[Ne,i(e("input",{class:"form-control form--control",type:"text","onUpdate:modelValue":o[3]||(o[3]=s=>a.value.address=s)},null,512),[[r,a.value.address]])])]),e("div",Ue,[Ee,e("div",$e,[i(e("textarea",{class:"form-control form--control ps-3",rows:"6","onUpdate:modelValue":o[4]||(o[4]=s=>a.value.description=s)},null,512),[[r,a.value.description]])])]),e("div",Le,[Se,e("div",De,[Ve,i(e("input",{class:"form-control form--control",type:"text","onUpdate:modelValue":o[5]||(o[5]=s=>a.value.website=s)},null,512),[[r,a.value.website]])])]),e("div",{class:"col-lg-12"},[e("button",{class:"theme-btn mt-3 border-0",type:"button",onClick:k}," Save Changes ")])]),Te])])])])],64)}}};export{je as default};
