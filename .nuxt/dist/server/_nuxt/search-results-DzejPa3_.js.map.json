{"file":"search-results-DzejPa3_.js","mappings":";;;;;;;;;;;;;;;;;;;;;;;;AA8EA,UAAM,QAAQ;AACC,cAAU;AAEzB,UAAM,SAAS,IAAI,EAAE,MAAM,CAAA,GAAI,eAAe,MAAM,eAAe,MAAM,cAAc,GAAG,WAAW,EAAG,CAAA;AAGlG,UAAA,mBAAmB,OAAO,OAAO,MAAM;AACvC,UAAA;AACF,cAAM,SAAS;AAAA,UACb,OAAO,MAAM,MAAM;AAAA,UACnB,SAAS,MAAM,MAAM;AAAA,UACrB,UAAU,MAAM,MAAM;AAAA,UACtB;AAAA,QAAA;AAEF,cAAM,OAAO,MAAM,aAAa,aAAa,MAAM;AACnD,eAAO,QAAQ,KAAK;AAAA,eACb,OAAO;AACN,gBAAA,MAAM,kCAAkC,KAAK;AAAA,MACvD;AAAA,IAAA;AASF,UAAM,MAAM,MAAM,MAAM,MAAM,CAAC,YAAY;AACxB,uBAAA,OAAO,OAAO,KAAK,CAAC;AAAA,IAAA,CACtC;AAGK,UAAA,aAAa,SAAS,MAAM;AAChC,aAAO,MAAM,KAAK,EAAE,QAAQ,OAAO,MAAM,UAAU,GAAG,CAAC,GAAG,MAAM,IAAI,CAAC;AAAA,IAAA,CACtE;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;","names":[],"sources":["../../../../pages/search-results.vue"],"sourcesContent":["<template>\r\n  <section class=\"breadcrumb-area bread-bg\">\r\n    <div class=\"overlay\"></div>\r\n    <div class=\"container\">\r\n      <div class=\"breadcrumb-content text-center\">\r\n        <h2 class=\"sec__title text-white mb-3\">Search Results</h2>\r\n        <ul class=\"bread-list\">\r\n          <li><NuxtLink to=\"/\">home</NuxtLink></li>\r\n          <li>Search Results for \"{{ $route.query.query }}\"</li>\r\n        </ul>\r\n      </div>\r\n    </div>\r\n  </section>\r\n\r\n  <section class=\"card-area section--padding pt-0\">\r\n    <div class=\"container\">\r\n      <div class=\"row mt-5 d-flex\" v-if=\"events.data.length\">\r\n        <div class=\"col-lg-4 col-md-6\" v-for=\"(event, index) in events.data\" :key=\"index\">\r\n                <NuxtLink  :to=\"`/listing-details/${event.slug}`\">\r\n          <div class=\"card mb-0 hover-y\">\r\n            <a class=\"card-image\">\r\n              <img :src=\"`${$config.public.baseURL}/` + event.featured_photo\" class=\"card-img-top\" alt=\"Event Image\" />\r\n              <span class=\"badge badge-pill\" :class=\"{\r\n                'text-bg-danger': event.event_type === 'online',\r\n                'text-bg-success': event.event_type === 'physical',\r\n                'text-bg-primary': event.event_type === 'hybrid'\r\n              }\">{{ event.event_type }}</span>\r\n            </a>\r\n            <div class=\"card-body position-relative\">\r\n              <h4 class=\"card-title mb-0\">\r\n                <a>{{ event.title }}</a>\r\n              </h4>\r\n              <p class=\"card-text\">{{ event.venue.venue_name }}, {{ event.country.name }}</p>\r\n              <ul class=\"info-list mt-3\">\r\n                <li>\r\n                  <span class=\"fal fa-link icon\"></span>\r\n                  <a target=\"_blank\" :href=\"event.website_link\">{{ event.website_link }}</a>\r\n                </li>\r\n                <li>\r\n                  <span class=\"fal fa-calendar icon\"></span> {{ event.event_date_from }}\r\n                </li>\r\n                <li><span class=\"fal fa-watch icon\"></span> {{ event.event_time_from }}</li>\r\n              </ul>\r\n            </div>\r\n          </div>\r\n            </NuxtLink>\r\n        </div>\r\n      </div>\r\n\r\n      <!-- Pagination Links -->\r\n      <nav aria-label=\"Page navigation example\" class=\"mt-5\">\r\n        <ul class=\"pagination justify-content-center pagination-list\">\r\n          <li class=\"page-item\" :class=\"{ disabled: !events.prev_page_url }\">\r\n            <a class=\"page-link\" @click.prevent=\"changePage(events.current_page - 1)\" aria-label=\"Previous\">\r\n              <span aria-hidden=\"true\" class=\"fal fa-angle-left\"></span>\r\n              <span class=\"sr-only\">Previous</span>\r\n            </a>\r\n          </li>\r\n          <li v-for=\"page in totalPages\" :key=\"page\" class=\"page-item\" :class=\"{ active: events.current_page === page }\">\r\n            <a class=\"page-link\" @click.prevent=\"changePage(page)\">{{ page }}</a>\r\n          </li>\r\n          <li class=\"page-item\" :class=\"{ disabled: !events.next_page_url }\">\r\n            <a class=\"page-link\" @click.prevent=\"changePage(events.current_page + 1)\" aria-label=\"Next\">\r\n              <span aria-hidden=\"true\" class=\"fal fa-angle-right\"></span>\r\n              <span class=\"sr-only\">Next</span>\r\n            </a>\r\n          </li>\r\n        </ul>\r\n      </nav>\r\n    </div>\r\n  </section>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, onMounted, watch, nextTick, computed } from 'vue';\r\nimport { useRoute, useRouter } from 'vue-router';\r\nimport eventService from '@/services/eventService'; // Adjust the path based on your project structure\r\n\r\nconst route = useRoute();\r\nconst router = useRouter();\r\n\r\nconst events = ref({ data: [], prev_page_url: null, next_page_url: null, current_page: 1, last_page: 1 });\r\n\r\n// Fetch data from the API\r\nconst getSearchResults = async (page = 1) => {\r\n  try {\r\n    const params = {\r\n      query: route.query.query,\r\n      country: route.query.country,\r\n      category: route.query.category,\r\n      page: page,\r\n    };\r\n    const data = await eventService.searchEvents(params);\r\n    events.value = data.data;\r\n  } catch (error) {\r\n    console.error('Error fetching search results:', error);\r\n  }\r\n};\r\n\r\n// Fetch results on mount\r\nonMounted(() => {\r\n  getSearchResults();\r\n});\r\n\r\n// Watch for route changes (e.g., page changes)\r\nwatch(() => route.query.page, (newPage) => {\r\n  getSearchResults(Number(newPage) || 1);\r\n});\r\n\r\n// Calculate total pages\r\nconst totalPages = computed(() => {\r\n  return Array.from({ length: events.value.last_page }, (_, i) => i + 1);\r\n});\r\n\r\nconst changePage = (page) => {\r\n  if (page < 1 || page > events.value.last_page) return;\r\n  // Update the route query parameters\r\n  router.push({\r\n    name: 'search-results',\r\n    query: {\r\n      ...route.query,\r\n      page,\r\n    },\r\n  });\r\n  nextTick(() => {\r\n    window.scrollTo(0, 0);\r\n  });\r\n};\r\n</script>\r\n"],"version":3}