{"version":3,"file":"login-CtWCa2rz.js","sources":["../../../../pages/login.vue"],"sourcesContent":["<template>\r\n    <section class=\"breadcrumb-area bread-bg\">\r\n      <div class=\"overlay\"></div>\r\n      <div class=\"container\">\r\n        <div class=\"breadcrumb-content text-center\">\r\n          <h2 class=\"sec__title text-white mb-3\">Login</h2>\r\n          <ul class=\"bread-list\">\r\n            <li><a href=\"/\">home</a></li>\r\n            <li>login</li>\r\n          </ul>\r\n        </div>\r\n      </div>\r\n      <div class=\"bread-svg\">\r\n        <svg viewBox=\"0 0 500 150\" preserveAspectRatio=\"none\">\r\n          <path\r\n            d=\"M-4.22,89.30 C280.19,26.14 324.21,125.81 511.00,41.94 L500.00,150.00 L0.00,150.00 Z\"\r\n          ></path>\r\n        </svg>\r\n      </div>\r\n    </section>\r\n  \r\n    <section class=\"contact-area padding-top-60px padding-bottom-90px\">\r\n      <div class=\"container\">\r\n        <div class=\"col-lg-7 mx-auto\">\r\n          <form @submit.prevent=\"loginUser\" class=\"card\">\r\n            <div class=\"card-body\">\r\n              <div class=\"text-center\">\r\n                <h4 class=\"font-size-28 font-weight-semi-bold mb-1\">\r\n                  Login to your account\r\n                </h4>\r\n              </div>\r\n              <div class=\"d-flex align-items-center\">\r\n                <hr class=\"border-top-gray flex-grow-1\" />\r\n                <hr class=\"border-top-gray flex-grow-1\" />\r\n              </div>\r\n              <div class=\"form-group\">\r\n                <label class=\"label-text\">Username or email</label>\r\n                <input\r\n                  v-model=\"credentials.email\"\r\n                  class=\"form-control form--control ps-3\"\r\n                  type=\"text\"\r\n                  placeholder=\"Username, or email\"\r\n                  required\r\n                />\r\n              </div>\r\n              <div class=\"form-group\">\r\n                <label class=\"label-text\">Password</label>\r\n                <div class=\"position-relative\">\r\n                  <input\r\n                    v-model=\"credentials.password\"\r\n                    class=\"form-control form--control ps-3 password-field\"\r\n                    type=\"password\"\r\n                    placeholder=\"Password\"\r\n                    required\r\n                  />\r\n                  <a\r\n                    href=\"javascript:void(0)\"\r\n                    class=\"position-absolute top-0 right-0 h-100 toggle-password\"\r\n                    title=\"toggle show/hide password\"\r\n                  >\r\n                    <i class=\"far fa-eye eye-on\"></i>\r\n                    <i class=\"far fa-eye-slash eye-off\"></i>\r\n                  </a>\r\n                </div>\r\n              </div>\r\n              <div\r\n                class=\"form-group d-flex align-items-center justify-content-between\"\r\n              >\r\n                <div class=\"custom-control custom-checkbox\">\r\n                  <input\r\n                    type=\"checkbox\"\r\n                    class=\"custom-control-input\"\r\n                    id=\"RememberMe\"\r\n                  />\r\n                  <label class=\"custom-control-label\" for=\"RememberMe\"\r\n                    >Remember Me</label\r\n                  >\r\n                </div>\r\n                <a href=\"/recover\" class=\"btn-link\">Forgot password?</a>\r\n              </div>\r\n              <button class=\"theme-btn border-0\" type=\"submit\">\r\n                Login Now\r\n              </button>\r\n              <p class=\"mt-3\">\r\n                Not a member?\r\n                <nuxt-link to=\"/signup\" class=\"btn-link\">Register</nuxt-link>\r\n              </p>\r\n            </div>\r\n          </form>\r\n        </div>\r\n      </div>\r\n    </section>\r\n  </template>\r\n  \r\n  <script setup>\r\n  import { ref } from 'vue';\r\n  import { useRouter } from 'vue-router';\r\n  import authService from '~/services/authService';\r\n  \r\n  const credentials = ref({\r\n    email: '',\r\n    password: '',\r\n  });\r\n  \r\n  const router = useRouter();\r\n  \r\n  const loginUser = async () => {\r\n    try {\r\n      const data = await authService.login(credentials.value);\r\n  \r\n      // Store the token in local storage\r\n      localStorage.setItem('access_token', data.access_token);\r\n      localStorage.setItem('user_id', data.user.id);\r\n      // Redirect to the add-listing page\r\n      router.push('/user-dashboard');\r\n    } catch (error) {\r\n      console.error('Error logging in:', error);\r\n      useNuxtApp().$toast.error('Failed to login. Please try again.', {\r\n       autoClose: 5000,\r\n       theme: \"colored\",\r\n       dangerouslyHTMLString: true,\r\n     })\r\n     ;\r\n    }\r\n  };\r\n  </script>\r\n  \r\n  <style>\r\n  /* Add your styles here */\r\n  </style>\r\n  "],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;AAmGE,UAAM,cAAc,IAAI;AAAA,MACtB,OAAO;AAAA,MACP,UAAU;AAAA,IACd,CAAG;AAEc,cAAY;;;;;;;;;;;;;;;;;;;;;;;;;;;;;"}