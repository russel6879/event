{"version":3,"file":"_id_-ZnuwNYUk.js","sources":["../../../../pages/category/[id].vue"],"sourcesContent":["<template>\r\n  <section class=\"breadcrumb-area bread-bg\">\r\n    <div class=\"overlay\"></div>\r\n    <div class=\"container\">\r\n      <div class=\"breadcrumb-content text-center\">\r\n        <h2 class=\"sec__title text-white mb-3\">Listings</h2>\r\n        <ul class=\"bread-list\">\r\n          <li><NuxtLink to=\"/\">home</NuxtLink></li>\r\n          <li>listings</li>\r\n          <li>{{ categoryName }}</li>\r\n        </ul>\r\n      </div>\r\n    </div>\r\n    <div class=\"bread-svg\">\r\n      <svg viewBox=\"0 0 500 150\" preserveAspectRatio=\"none\">\r\n        <path d=\"M-4.22,89.30 C280.19,26.14 324.21,125.81 511.00,41.94 L500.00,150.00 L0.00,150.00 Z\"></path>\r\n      </svg>\r\n    </div>\r\n  </section>\r\n\r\n  <section class=\"card-area section--padding pt-0\">\r\n    <div class=\"container\">\r\n      <div class=\"row mt-5 d-flex\">\r\n        <div class=\"col-lg-4 col-md-6\" v-for=\"(event, index) in events.data\" :key=\"index\">\r\n              <NuxtLink  :to=\"`/listing-details/${event.slug}`\">\r\n          <div class=\"card mb-0 hover-y\">\r\n            <a class=\"card-image\">\r\n              <img :src=\"`${$config.public.baseURL}/` + event.featured_photo\" class=\"card-img-top\" alt=\"Event Image\" />\r\n              <span class=\"badge badge-pill\" :class=\"{\r\n                'text-bg-danger': event.event_type === 'online',\r\n                'text-bg-success': event.event_type === 'physical',\r\n                'text-bg-primary': event.event_type === 'hybrid'\r\n              }\">{{ event.event_type }}</span>\r\n            </a>\r\n            <div class=\"card-body position-relative\">\r\n              <a class=\"author-img\">\r\n                <img :src=\"`${$config.public.baseURL}/` + event.user.profile_image\" alt=\"Author Image\" />\r\n              </a>\r\n              <div class=\"category-container\">\r\n                <div v-for=\"(category, index) in event.category_names.slice(0, 2)\" :key=\"index\" class=\"category-item\">\r\n                  <a href=\"#\" class=\"card-cat\">\r\n                    <span class=\"fal fa-tag icon-element icon-element-sm\"></span>\r\n                    {{ category }}\r\n                  </a>\r\n                </div>\r\n              </div>\r\n              <div class=\"d-flex align-items-center mb-1\">\r\n                <h4 class=\"card-title mb-0\">\r\n                  <a>{{ event.title }}</a>\r\n                </h4>\r\n                <i class=\"fa fa-check-circle ms-1 text-success\" data-bs-toggle=\"tooltip\" data-placement=\"top\" title=\"Claimed\"></i>\r\n              </div>\r\n              <p class=\"card-text\">{{ event.venue.venue_name }}, {{ event.country.name }}</p>\r\n              <ul class=\"info-list mt-3\">\r\n                <li>\r\n                  <span class=\"fal fa-link icon\"></span>\r\n                  <a target=\"_blank\" :href=\"event.website_link\">{{ event.website_link }}</a>\r\n                </li>\r\n                <li>\r\n                  <span class=\"fal fa-calendar icon\"></span> {{ event.event_date_from }}\r\n                </li>\r\n                <li><span class=\"fal fa-watch icon\"></span> {{ event.event_time_from }}</li>\r\n              </ul>\r\n            </div>\r\n          </div>\r\n              </NuxtLink>\r\n        </div>\r\n      </div>\r\n      <nav aria-label=\"Page navigation example\" class=\"mt-5\">\r\n        <ul class=\"pagination justify-content-center pagination-list\">\r\n          <li class=\"page-item\" :class=\"{ disabled: !events.prev_page_url }\">\r\n            <a class=\"page-link\" @click.prevent=\"changePage(events.current_page - 1)\" aria-label=\"Previous\">\r\n              <span aria-hidden=\"true\" class=\"fal fa-angle-left\"></span>\r\n              <span class=\"sr-only\">Previous</span>\r\n            </a>\r\n          </li>\r\n          <li v-for=\"page in totalPages\" :key=\"page\" class=\"page-item\" :class=\"{ active: events.current_page === page }\">\r\n            <a class=\"page-link\" @click.prevent=\"changePage(page)\">{{ page }}</a>\r\n          </li>\r\n          <li class=\"page-item\" :class=\"{ disabled: !events.next_page_url }\">\r\n            <a class=\"page-link\" @click.prevent=\"changePage(events.current_page + 1)\" aria-label=\"Next\">\r\n              <span aria-hidden=\"true\" class=\"fal fa-angle-right\"></span>\r\n              <span class=\"sr-only\">Next</span>\r\n            </a>\r\n          </li>\r\n        </ul>\r\n      </nav>\r\n    </div>\r\n  </section>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, onMounted, watch } from 'vue';\r\nimport { useRoute } from 'vue-router';\r\nimport eventService from '@/services/eventService'; // Adjust the path based on your project structure\r\n\r\nconst events = ref({ data: [], prev_page_url: null, next_page_url: null, current_page: 1, last_page: 1 });\r\nconst categoryName = ref('');\r\nconst route = useRoute(); // Use to access the dynamic route parameter\r\n\r\nconst getCategoryEvents = async (page = 1) => {\r\n  try {\r\n    const categoryId = route.params.id; // Get the category ID from the URL\r\n    const data = await eventService.getEventsByCategory(categoryId, page); // Fetch events by category and page\r\n    events.value = data.data; // Update the events object with API response\r\n    categoryName.value = data.category_name; // Assuming API returns category name\r\n  } catch (error) {\r\n    console.error('Error fetching category events:', error);\r\n  }\r\n};\r\n\r\n// Fetch events on mount\r\nonMounted(() => {\r\n  getCategoryEvents();\r\n});\r\n\r\n// Watch for route changes (e.g., page changes)\r\nwatch(() => route.query.page, (newPage) => {\r\n  getCategoryEvents(Number(newPage) || 1);\r\n});\r\n\r\n// Calculate total pages\r\nconst totalPages = computed(() => {\r\n  return Array.from({ length: events.value.last_page }, (_, i) => i + 1);\r\n});\r\n\r\nconst changePage = (page) => {\r\n  if (page < 1 || page > events.value.last_page) return;\r\n  // Update the route query parameters\r\n  route.query.page = page;\r\n  getCategoryEvents(page);\r\n   nextTick(() => {\r\n    window.scrollTo(0, 0);\r\n  });\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.category-container {\r\n  display: flex;\r\n  flex-wrap: wrap; /* Allows wrapping to the next line if necessary */\r\n  gap: 8px; /* Adds space between items */\r\n}\r\n\r\n.category-item {\r\n  display: flex;\r\n  align-items: center;\r\n}\r\n\r\n.card-cat {\r\n  display: flex;\r\n  align-items: center;\r\n  padding: 8px;\r\n  text-decoration: none;\r\n  color: #333;\r\n}\r\n\r\n.icon-element {\r\n  margin-right: 8px;\r\n}\r\n/* Add your custom styles here */\r\n</style>\r\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;AAgGA,UAAM,SAAS,IAAI,EAAE,MAAM,CAAA,GAAI,eAAe,MAAM,eAAe,MAAM,cAAc,GAAG,WAAW,EAAG,CAAA;AAClG,UAAA,eAAe,IAAI,EAAE;AAC3B,UAAM,QAAQ;AAER,UAAA,oBAAoB,OAAO,OAAO,MAAM;AACxC,UAAA;AACI,cAAA,aAAa,MAAM,OAAO;AAChC,cAAM,OAAO,MAAM,aAAa,oBAAoB,YAAY,IAAI;AACpE,eAAO,QAAQ,KAAK;AACpB,qBAAa,QAAQ,KAAK;AAAA,eACnB,OAAO;AACN,gBAAA,MAAM,mCAAmC,KAAK;AAAA,MACxD;AAAA,IAAA;AASF,UAAM,MAAM,MAAM,MAAM,MAAM,CAAC,YAAY;AACvB,wBAAA,OAAO,OAAO,KAAK,CAAC;AAAA,IAAA,CACvC;AAGK,UAAA,aAAa,SAAS,MAAM;AAChC,aAAO,MAAM,KAAK,EAAE,QAAQ,OAAO,MAAM,UAAU,GAAG,CAAC,GAAG,MAAM,IAAI,CAAC;AAAA,IAAA,CACtE;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;"}