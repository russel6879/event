import{_ as U}from"./fRkHPlJY.js";import{c as b,y as L,C as u,D as m,a1 as v,O as s,Q as a,l as h,E as w,F as y,_ as S,Y as r,a2 as i,P as c}from"./_yjeeBRm.js";import{b as $,u as n}from"./BZnP9IZH.js";import{a as g}from"./Bzf_yli5.js";import{e as _}from"./DAQccL5z.js";import"./B4uVmeYG.js";const D={class:"dashboard-area padding-bottom-70px"},V={class:"bg-white shadow-sm py-4"},T={class:"container"},A={class:"dashboard-nav d-flex flex-wrap align-items-center justify-content-between"},B={class:"my-1"},M={class:"container"},z={class:"tab-content mt-4",id:"myTabContent"},F={class:"tab-pane fade show active",id:"listings",role:"tabpanel","aria-labelledby":"listings-tab"},Y={class:"row"},R={class:"card hover-y"},H={class:"card-image"},j=["src"],O={class:"card-body position-relative"},W={href:"#",class:"card-cat mb-2"},I={class:"card-title mb-1"},Q={href:"listing-details.html"},q={class:"card-text"},G={class:"card-footer bg-transparent border-top-gray"},J=["onClick"],K={class:"tab-pane fade",id:"settings",role:"tabpanel","aria-labelledby":"settings-tab"},X={class:"row"},Z={class:"edit-profile-photo media mb-4 col-lg-12"},ss=["src"],es={class:"file-upload-wrap file-upload-wrap-layout-2 media-body align-self-center"},ts={class:"col-lg-6 col-md-6"},os={class:"form-group"},ls={class:"col-lg-6 col-md-6"},as={class:"form-group"},rs={class:"col-lg-6 col-md-6"},is={class:"form-group"},ns={class:"col-lg-6 col-md-6"},ds={class:"form-group"},cs={class:"col-lg-12"},us={class:"form-group"},ms={class:"col-lg-12 col-md-6"},gs={class:"form-group"},xs={__name:"user-dashboard",setup(ps){const p=b([]),x=$(),l=b({name:"",email:"",phone:"",address:"",description:"",profile_image:"",profile_image_url:"",website:"",facebook:"",twitter:"",instagram:""}),C=o=>{const e=o.target.files[0];if(e){l.value.profile_image=e;const d=new FileReader;d.onload=t=>{l.value.profile_image_url=t.target.result},d.readAsDataURL(e)}},k=async()=>{try{const o=await g.updateUserProfile(l.value);n().$toast.success("Profile updated successfully!",{autoClose:5e3,theme:"colored",dangerouslyHTMLString:!0})}catch(o){console.error("Error updating profile:",o)}},f=async()=>{try{const o=await _.getUserListings();p.value=o}catch(o){console.error("Error fetching events:",o)}},P=async()=>{try{const o=await g.getUserProfile();l.value=o}catch(o){console.error("Error fetching profile:",o)}};L(()=>{f(),P()});const E=async()=>{try{await g.logout(),localStorage.removeItem("access_token"),x.push("/login"),n().$toast.success("Successfully logged out.",{autoClose:5e3,theme:"colored",dangerouslyHTMLString:!0})}catch(o){console.error("Error logging out:",o),n().$toast.error("Failed to logout. Please try again.",{autoClose:5e3,theme:"colored",dangerouslyHTMLString:!0})}},N=async o=>{try{(await n().$swal.fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"})).isConfirmed&&(await _.deleteEvent(o),n().$toast.success("Your event has been deleted.",{autoClose:5e3,theme:"colored",dangerouslyHTMLString:!0}),f())}catch(e){n().$swal.fire("Error!","Failed to delete event.","error"),console.error("Error deleting event:",e)}};return(o,e)=>{const d=U;return u(),m(y,null,[e[27]||(e[27]=v('<section class="breadcrumb-area bread-bg py-5"><div class="overlay"></div><div class="container"><div class="breadcrumb-content text-center"><h2 class="sec__title text-white mb-3">Dashboard</h2><h2 class="sec__title text-white mb-3">Dashboard</h2><ul class="bread-list"><li><a href="index.html">home</a></li><li>pages</li><li>Dashboard</li></ul></div></div></section>',1)),s("section",D,[s("div",V,[s("div",T,[s("div",A,[e[8]||(e[8]=s("ul",{class:"nav nav-tabs my-tabs my-tabs-2 justify-content-center my-1",id:"myTab",role:"tablist"},[s("li",{class:"nav-item",role:"presentation"},[s("a",{class:"nav-link active",id:"listings-tab","data-bs-toggle":"tab",href:"#listings",role:"tab","aria-controls":"listings","aria-selected":"true"},[s("i",{class:"fal fa-list me-1 font-size-14"}),a(" Listings ")])]),s("li",{class:"nav-item",role:"presentation"},[s("a",{class:"nav-link",id:"settings-tab","data-bs-toggle":"tab",href:"#settings",role:"tab","aria-controls":"settings","aria-selected":"false"},[s("i",{class:"fal fa-cog me-1 font-size-14"}),a(" Settings ")])])],-1)),s("div",B,[h(d,{to:"/6add-listing",class:"theme-btn theme-btn-sm bg-white shadow-sm border border-gray text-black font-weight-medium me-1"},{default:w(()=>e[6]||(e[6]=[s("i",{class:"fal fa-plus me-1"},null,-1),a(" Add listing")])),_:1}),s("button",{onClick:E,class:"theme-btn theme-btn-sm bg-white shadow-sm border border-gray text-black font-weight-medium"},e[7]||(e[7]=[s("i",{class:"fal fa-sign-out me-1"},null,-1),a(" Log out")]))])])])]),s("div",M,[s("div",z,[s("div",F,[s("div",Y,[(u(!0),m(y,null,S(p.value,t=>(u(),m("div",{class:"col-lg-4 col-md-6",key:t.id},[s("div",R,[s("a",H,[s("img",{src:`${o.$config.public.baseURL}/`+t.featured_photo,class:"card-img-top lazy",alt:"card image"},null,8,j),e[9]||(e[9]=s("span",{class:"badge text-bg-success badge-pill"},"Now open",-1))]),s("div",O,[s("a",W,[e[10]||(e[10]=s("span",{class:"fal fa-utensils icon-element icon-element-sm"},null,-1)),a(" "+c(t.category),1)]),s("h4",I,[s("a",Q,c(t.title),1)]),s("p",q,c(t.venue)+" "+c(t.country),1),e[11]||(e[11]=s("div",{class:"star-rating mt-1","data-rating":"5"},[s("div",{class:"rating-counter"},"5 reviews")],-1))]),s("div",G,[h(d,{to:`/edit-listing/${t.id}`,class:"btn btn-sm edit-btn bg-success text-white me-1"},{default:w(()=>e[12]||(e[12]=[a(" Edit ")])),_:2},1032,["to"]),s("a",{onClick:fs=>N(t.id),class:"btn btn-sm delete-btn bg-danger text-white"}," Delete ",8,J)])])]))),128))])]),s("div",K,[s("div",X,[e[25]||(e[25]=s("div",{class:"col-lg-12"},[s("h4",{class:"font-size-20 font-weight-semi-bold mb-3"}," Edit Profile ")],-1)),s("div",Z,[s("img",{src:l.value.profile_image_url||`${o.$config.public.baseURL}/`+l.value.profile_image,alt:"avatar image",class:"profile-img me-4 flex-shrink-0"},null,8,ss),s("div",es,[s("input",{type:"file",onChange:C,class:"multi file-upload-input with-preview",multiple:""},null,32),e[13]||(e[13]=s("span",{class:"file-upload-text"},[s("i",{class:"fal fa-upload me-2"}),a("Upload Photo")],-1))])]),s("div",ts,[e[15]||(e[15]=s("label",{class:"label-text"},"Your Name",-1)),s("div",os,[e[14]||(e[14]=s("span",{class:"fal fa-user form-icon"},null,-1)),r(s("input",{class:"form-control form--control",type:"text","onUpdate:modelValue":e[0]||(e[0]=t=>l.value.name=t)},null,512),[[i,l.value.name]])])]),s("div",ls,[e[17]||(e[17]=s("label",{class:"label-text"},"Your Email",-1)),s("div",as,[e[16]||(e[16]=s("span",{class:"fal fa-envelope form-icon"},null,-1)),r(s("input",{class:"form-control form--control",type:"text","onUpdate:modelValue":e[1]||(e[1]=t=>l.value.email=t)},null,512),[[i,l.value.email]])])]),s("div",rs,[e[19]||(e[19]=s("label",{class:"label-text"},"Phone Number",-1)),s("div",is,[e[18]||(e[18]=s("span",{class:"fal fa-phone form-icon"},null,-1)),r(s("input",{class:"form-control form--control",type:"text","onUpdate:modelValue":e[2]||(e[2]=t=>l.value.phone=t)},null,512),[[i,l.value.phone]])])]),s("div",ns,[e[21]||(e[21]=s("label",{class:"label-text"},"Address",-1)),s("div",ds,[e[20]||(e[20]=s("span",{class:"fal fa-map-marker-alt form-icon"},null,-1)),r(s("input",{class:"form-control form--control",type:"text","onUpdate:modelValue":e[3]||(e[3]=t=>l.value.address=t)},null,512),[[i,l.value.address]])])]),s("div",cs,[e[22]||(e[22]=s("label",{class:"label-text"},"Notes",-1)),s("div",us,[r(s("textarea",{class:"form-control form--control ps-3",rows:"6","onUpdate:modelValue":e[4]||(e[4]=t=>l.value.description=t)},null,512),[[i,l.value.description]])])]),s("div",ms,[e[24]||(e[24]=s("label",{class:"label-text"},"Website",-1)),s("div",gs,[e[23]||(e[23]=s("span",{class:"fal fa-globe form-icon"},null,-1)),r(s("input",{class:"form-control form--control",type:"text","onUpdate:modelValue":e[5]||(e[5]=t=>l.value.website=t)},null,512),[[i,l.value.website]])])]),s("div",{class:"col-lg-12"},[s("button",{class:"theme-btn mt-3 border-0",type:"button",onClick:k}," Save Changes ")])]),e[26]||(e[26]=v('<hr class="border-top-gray my-5"><div class="row d-none"><div class="col-lg-12"><h4 class="font-size-20 font-weight-semi-bold mb-3"> Change Password </h4></div><div class="col-lg-6 col-md-6"><label class="label-text">Current Password</label><div class="form-group"><span class="fal fa-lock form-icon"></span><input class="form-control form--control password-field" type="password" name="password" placeholder="Current password"></div></div><div class="col-lg-6 col-md-6"><label class="label-text">New Password</label><div class="form-group"><span class="fal fa-lock form-icon"></span><input class="form-control form--control password-field" type="password" name="password" placeholder="New password"></div></div><div class="col-lg-6 col-md-6"><label class="label-text">New Password (again)</label><div class="form-group"><span class="fal fa-lock form-icon"></span><input class="form-control form--control password-field" type="password" name="password" placeholder="New password again"></div></div><div class="col-lg-12"><a href="javascript:void(0)" class="btn btn-light toggle-password" data-bs-toggle="tooltip" data-placement="right" title="toggle show/hide password"><i class="far fa-eye eye-on"></i><i class="far fa-eye-slash eye-off"></i></a></div><div class="col-lg-12"><button class="theme-btn mt-3 border-0" type="button"> Change Password </button></div></div><div class="border border-danger p-4 mt-5 rounded d-none"><h4 class="font-size-20 font-weight-semi-bold mb-1 text-danger"> Delete Account </h4><p class="mb-3"><span class="text-warning">Warning:</span> Once you delete your account, there is no going back. Please be certain. </p><a href="#" class="theme-btn bg-danger" data-bs-toggle="modal" data-bs-target="#deleteAccountModal">Delete Account</a></div>',3))])])])])],64)}}};export{xs as default};
