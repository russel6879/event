import{i as t,c as e,p as i,$ as a}from"../runtime.mjs";const s=new Map;async function requireNuxtHubAuthorization(r){const o=(t(r,"authorization")||"").split(" ")[1];if(!o)throw e({statusCode:403,message:"Missing Authorization header"});const n=i.env.NUXT_HUB_PROJECT_KEY,u=i.env.NUXT_HUB_PROJECT_SECRET_KEY;if(!u||o!==u){if(u&&!n)throw e({statusCode:401,message:"Invalid secret key"});if(n){if(s.has(o))return;return await a(`/api/projects/${n}`,{baseURL:i.env.NUXT_HUB_URL||"https://admin.hub.nuxt.com",method:"HEAD",headers:{authorization:`Bearer ${o}`}}),void s.set(o,!0)}throw e({statusCode:401,message:"Missing NUXT_HUB_PROJECT_SECRET_KEY environment variable or NUXT_HUB_PROJECT_KEY environment variable"})}}export{requireNuxtHubAuthorization as r};
//# sourceMappingURL=auth.mjs.map
