import{_ as x}from"./DXXRXNzy.js";import{a as w,b as q,P as C}from"./PojQWPIc.js";import{c as N,y as P,w as R,f as $,C as r,D as o,O as e,l as y,E as f,P as n,F as _,_ as b,a0 as S,a4 as c,X as p,Q as g,n as E}from"./_yjeeBRm.js";import{e as V}from"./CTCEojIl.js";import"./B4uVmeYG.js";const B={class:"breadcrumb-area bread-bg"},L={class:"container"},T={class:"breadcrumb-content text-center"},D={class:"bread-list"},F={class:"card-area section--padding pt-0"},M={class:"container"},j={key:0,class:"row mt-5 d-flex"},z={class:"card mb-0 hover-y"},A={class:"card-image"},I=["src"],O={class:"card-body position-relative"},Q={class:"card-title mb-0"},U={class:"card-text"},X={class:"info-list mt-3"},G=["href"],H={"aria-label":"Page navigation example",class:"mt-5"},J={class:"pagination justify-content-center pagination-list"},K=["onClick"],te={__name:"search-results",setup(W){const i=w(),h=q(),l=N({data:[],prev_page_url:null,next_page_url:null,current_page:1,last_page:1}),m=async(t=1)=>{try{const s={query:i.query.query,country:i.query.country,category:i.query.category,page:t},u=await V.searchEvents(s);l.value=u.data}catch(s){console.error("Error fetching search results:",s)}};P(()=>{m()}),R(()=>i.query.page,t=>{m(Number(t)||1)});const k=$(()=>Array.from({length:l.value.last_page},(t,s)=>s+1)),d=t=>{t<1||t>l.value.last_page||(h.push({name:"search-results",query:{...i.query,page:t}}),E(()=>{window.scrollTo(0,0)}))};return(t,s)=>{const u=x;return r(),o(_,null,[e("section",B,[s[4]||(s[4]=e("div",{class:"overlay"},null,-1)),e("div",L,[e("div",T,[s[3]||(s[3]=e("h2",{class:"sec__title text-white mb-3"},"Search Results",-1)),e("ul",D,[e("li",null,[y(u,{to:"/"},{default:f(()=>s[2]||(s[2]=[g("home")])),_:1})]),e("li",null,'Search Results for "'+n((t._.provides[C]||t.$route).query.query)+'"',1)])])])]),e("section",F,[e("div",M,[l.value.data.length?(r(),o("div",j,[(r(!0),o(_,null,b(l.value.data,(a,v)=>(r(),o("div",{class:"col-lg-4 col-md-6",key:v},[y(u,{to:`/listing-details/${a.slug}`},{default:f(()=>[e("div",z,[e("a",A,[e("img",{src:`${t.$config.public.baseURL}/`+a.featured_photo,class:"card-img-top",alt:"Event Image"},null,8,I),e("span",{class:c(["badge badge-pill",{"text-bg-danger":a.event_type==="online","text-bg-success":a.event_type==="physical","text-bg-primary":a.event_type==="hybrid"}])},n(a.event_type),3)]),e("div",O,[e("h4",Q,[e("a",null,n(a.title),1)]),e("p",U,n(a.venue.venue_name)+", "+n(a.country.name),1),e("ul",X,[e("li",null,[s[5]||(s[5]=e("span",{class:"fal fa-link icon"},null,-1)),e("a",{target:"_blank",href:a.website_link},n(a.website_link),9,G)]),e("li",null,[s[6]||(s[6]=e("span",{class:"fal fa-calendar icon"},null,-1)),g(" "+n(a.event_date_from),1)]),e("li",null,[s[7]||(s[7]=e("span",{class:"fal fa-watch icon"},null,-1)),g(" "+n(a.event_time_from),1)])])])])]),_:2},1032,["to"])]))),128))])):S("",!0),e("nav",H,[e("ul",J,[e("li",{class:c(["page-item",{disabled:!l.value.prev_page_url}])},[e("a",{class:"page-link",onClick:s[0]||(s[0]=p(a=>d(l.value.current_page-1),["prevent"])),"aria-label":"Previous"},s[8]||(s[8]=[e("span",{"aria-hidden":"true",class:"fal fa-angle-left"},null,-1),e("span",{class:"sr-only"},"Previous",-1)]))],2),(r(!0),o(_,null,b(k.value,a=>(r(),o("li",{key:a,class:c(["page-item",{active:l.value.current_page===a}])},[e("a",{class:"page-link",onClick:p(v=>d(a),["prevent"])},n(a),9,K)],2))),128)),e("li",{class:c(["page-item",{disabled:!l.value.next_page_url}])},[e("a",{class:"page-link",onClick:s[1]||(s[1]=p(a=>d(l.value.current_page+1),["prevent"])),"aria-label":"Next"},s[9]||(s[9]=[e("span",{"aria-hidden":"true",class:"fal fa-angle-right"},null,-1),e("span",{class:"sr-only"},"Next",-1)]))],2)])])])])],64)}}};export{te as default};
